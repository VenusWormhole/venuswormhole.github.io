define("EVELink",["require","exports","module"],function(a,b,c){var d=null;b.info=function(a){d||(d=/showinfo:([\d]{1,5})\/\/([\d]{6,10})>([\S]{1,256}?)</im);if(a){a+="";var c=d.exec(a);if(c)return"<a class='info' href='javascript:void(0);' onclick='IGB.info("+c[1]+","+c[2]+");'>"+c[3]+b.icon()+"</a>"}return null};var e=null;b.pilot=function(a){e||(e=/showinfo:(1\d\d\d)\/\/([\d]{6,12})>([\S ]{1,256}?)</im);if(a){a+="";var b=e.exec(a);if(b){var c="<a class='info' href='javascript:void(0);' onclick='IGB.pilot("+b[2]+");'>"+b[3]+"</a>";return{id:b[2],txt:b[3],link:c}}}return null};var f=null;b.solar=function(a){f||(f=/showinfo:(5)\/\/(3[\d]{7})>([\S]{1,256}?)</im);if(a){a+="";var b=f.exec(a);if(b){var c="<a class='info' href='javascript:void(0);' onclick='IGB.solar("+b[2]+");'>"+b[3]+"</a>";return{id:b[2],txt:b[3],link:c}}}return null};var g=/showinfo:(5)\/\/(31[\d]{6}).*?>(J[\d\+\-]{6})</im;b.whSolar=function(a){if(a){a+="";var b=g.exec(a);if(b){var c="<a class='info' href='javascript:void(0);' onclick='IGB.solar("+b[2]+");'>"+b[3]+"</a>";return{id:b[2],txt:b[3],link:c}}}return null};var h=null;return b.fitting=function(a){h||(h=/fitting:([\d;:]+)>(.+)</im);var b=h.exec(a);if(b){var c="<a class='info' href='javascript:void(0);' onclick='IGB.fitting("+b[1]+");'>"+b[4]+"</a>";return{id:b[1],txt:b[2],link:c}}return null},b.replace=function(a){},b.icon=function(){return"<img title='显示信息' src='"+VW.IMG+"/38_16_208.png'></img>"},b});var isEVEIGB=-1!=navigator.userAgent.indexOf("EVE-IGB")?!0:!1,IGB=null,RACE={Amarr:"艾玛",Caldari:"加达里"};define("EVEIGB",["require","exports","module"],function(a,b,c){function e(a){$.get("./service/EVEAPI.php?type=2&id="+a,function(a){var b=JSON.parse(a)[0];$("#"+b.characterID).remove(),$("body").append(['<div id="',b.characterID,'" title="角色信息"><table><tr><td>','<img src="http://image.eve-online.com.cn/Character/',b.characterID,'_128.jpg"/></td><td>',"<strong>",b.characterName,"</strong><br/>","种族:&nbsp;",b.race,"<br/>","血统:&nbsp;",b.bloodline,"<br/>","军团:&nbsp;",b.corporation,"<br/>","联盟:&nbsp;",b.alliance,"<br/>","安全等级:&nbsp;",b.securityStatus,"<br/>","</td></tr></table>雇佣记录:<table>",function(a){if(!a.length){var b=a;a=[],a.push(b)}var c=[];for(var d in a){var e=a[d]["@attributes"];c.push('<tr><td><img style="float:left;margin-right:3px;" src="http://image.eve-online.com.cn/Corporation/',e.corporationID,'_32.png"/></td><td>&nbsp;&nbsp;',e.corporationName,'</td><td align="right">',e.startDate,"</td></tr>")}return c.join("")}(b.rowset.row),"</table></div>"].join("")),$("#"+b.characterID).dialog({width:340,height:400})})}var d=null;return isEVEIGB?d=CCPEVE:(d={},d.showInfo=function(a,b){1377==a?e(b):window.location.hash="#showinfo/item/"+a}),b.trust=function(a){d.requestTrust(a||window.location.protocol+"//"+window.location.host+"/*")},b.info=function(a,b){d.showInfo(a,b)},b.region=function(a){a&&d.showInfo(3,a)},b.cnstl=function(a){a&&d.showInfo(4,a)},b.solar=function(a){a&&d.showInfo(5,a)},b.pilot=function(a){a&&d.showInfo(1377,a)},b.corp=function(a){a&&d.showInfo(2,a)},b.fitting=function(a){id&&d.showFitting(a)},b.joinChat=function(a){a&&d.joinChannel(a)},b.joinMail=function(a){a&&d.joinMailingList(a)},IGB=b,b}),require.config({baseUrl:VW.SCRIPTS}),require(["EVELink","EVEIGB"],function(a,b){function k(){var b=document.getElementById("trapped-pilot").value;if(b.length>0){var c=a.pilot(b);c?(g=c.txt,h=c.id,$("#trapped-pilot-link").html(c.link),f.html("<span style='color:green;'>Completed! 人物链接完成!</span>")):(g=null,f.html("<span style='color:red;'>Wrong format! 人物链接格式错误!<br/><a href='./Help.html#evelink'>怎样输入链接?</a></span>"))}}function l(){var b=document.getElementById("trapped-solar").value,c=a.whSolar(b);b.length>0&&(c?(i=c.txt,$("#trapped-solar-link").html(c.link),f.html("<span style='color:green;'>Completed! 星系链接完成!</span>")):(i=null,f.html("<span style='color:red;'>Wrong format! 星系链接格式错误!<br/><a href='./Help.html#evelink'>怎样输入链接?</a></span>")))}function m(){if(!g||!i){f.html("<span style='color:red;'>Please inout solarsystem and pilot! 请输入人物和星系链接!<br/><a href='./tutorial.php#evelink'>How to input link? 怎样输入链接?</a></span>");return}var a={};g&&h&&(a.name=g,a.roleId=h),i&&(a.solar=i),a.duration=365,a.words=document.getElementById("trapped-words").value,$(f).html("<span style='color:yellow;'>Submitting...正在提交中...</span>"),a.type="1",$.post("./trapped.php",a,function(a){var b=JSON.parse(a);if(!b)return f.html("<span style='color:red;'>发布失败，请联系管理员。</span>");b.status?f.html("<span style='color:red;'>"+b.status+"</span>"):(f.html("<span style='color:#11ff22;'>Completed! 发布成功!</span>"),o(),setTimeout(function(){window.location.hash="#panel-search/solar/"+i},2e3))})}function n(){b.trust(),setTimeout(function(){b.joinChat("VenusWormholeClub")},5e3)}function o(){$("#trapped-list").html("<br/><span style='color:yellow;'>"+VW.T.LOADING+"...</span>"),$.get("./trapped.php?type=3"+(VW.DEV?"&DEV":""),function(a){var b=JSON.parse(a);p(b)})}function p(a){if(!a)return;var b=[];for(var c in a)b.push("<p><strong class='title'><a href='./search.php?lang=",VW.LANG,"#showinfo/solar/",a[c].system,"'>",a[c].system,"</a></strong>&nbsp;<span style='color:grey;'>&nbsp;~",q(a[c].updated),"</span><br/>","<span style='word-break:break-all;'>",a[c].roleId?"<a href='javascript:void(0);' onclick='IGB.pilot("+a[c].roleId+");'>"+a[c].name+"</a>":a[c].name,"&gt;&nbsp;",a[c].words,"</span>&nbsp;<br/>",a[c].reward?NumberFormat(a[c].reward)+"&nbsp;ISK&nbsp;&nbsp;":"",a[c].contact,"</p>");$("#trapped-list").html(b.join("")),$("#trapped-loading").html("")}function q(a){var b=new Date(a),c=new Date,d=c-b,e=d/6e4;if(e<60)return Math.round(e)+"M";var f=e/60;if(f<24)return Math.round(f)+"H";var g=f/24;return g>90?null:Math.round(g)+"D"}var c=!1,d="panel-trapped",e="trapped-message",f=null;f=$("#"+e),o(),$("#trapped-pilot").on("blur",k).on("keydown",function(a){a.keyCode==13&&k()}).on("paste",function(){setTimeout(k,500)}),$("#trapped-solar").on("blur",l).on("keydown",function(a){a.keyCode==13&&l()}).on("paste",function(){setTimeout(l,500)}),$("#trapped-submit").on("click",m);var g=null,h=null,i=null,j=null}),define("trapped",function(){});window.VW.DEV=false;  
;window.VW.DEV=false;  
